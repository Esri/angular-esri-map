<!DOCTYPE html>
<html ng-app="esri-map-example">
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <title>Dynamic Map Service Layer</title>

        <!-- load Esri CSS -->
        <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.11/esri/css/esri.css">
    </head>
    <body ng-controller="MapController">
        <h2>Dynamic Map Service Layer</h2>
        <!-- add map to page and bind to scope map parameters -->
        <!-- TODO: why is zoom set to -1 by default? -->
        <esri-map id="map" map-options="{ sliderOrientation : 'horizontal' }">
            <esri-dynamic-map-service-layer url="//sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Population_World/MapServer" visible="{{dynamicLayer.visible}}" opacity="{{dynamicLayer.opacity}}" layer-options="{ imageParameters: { format: 'jpeg' } }" />
        </esri-map>
        <p><input type="checkbox" ng-model="dynamicLayer.visible" /> World Population - opacity: <input type="number" step="0.1" min="0" max="1" ng-model="dynamicLayer.opacity" /></p>
        <p>Based on <a href="https://developers.arcgis.com/javascript/3/jssamples/map_dynamic.html">this sample</a>.</p>

        <!-- load Esri JavaScript API -->
        <script type="text/javascript" src="//js.arcgis.com/3.11compact"></script>
        <!-- load Angular -->
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>
        <!-- load angular-esri-map directives -->
        <script src="lib/angular-esri-map.js"></script>
        <!-- run example app controller -->
        <script type="text/javascript">
            'use strict';
            angular.module('esri-map-example', ['esri.map'])
                .controller('MapController', function ($scope) {
                    $scope.dynamicLayer = {
                        visible: true,
                        opacity: 0.5
                    };
                });
        </script>
    </body>
</html>
